<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Redisse::Server
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Redisse/Server.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Redisse.html" title="Redisse (module)">Redisse</a></span></span>
     &raquo; 
    <span class="title">Server</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Redisse::Server
  
  
  <span class="private note title">Private</span>
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Goliath::API</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Goliath::API</li>
          
            <li class="next">Redisse::Server</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Server/Redis.html" title="Redisse::Server::Redis (module)">Redis</a></span>, <span class='object_link'><a href="Server/Responses.html" title="Redisse::Server::Responses (module)">Responses</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/redisse/server.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>

<p>Goliath::API class that defines the server.</p>

<p>See <span class='object_link'><a href="../Redisse.html#run-instance_method" title="Redisse#run (method)">#run</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Server/Redis.html" title="Redisse::Server::Redis (module)">Redis</a></span>, <span class='object_link'><a href="Server/Responses.html" title="Redisse::Server::Responses (module)">Responses</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Server/Stats.html" title="Redisse::Server::Stats (class)">Stats</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="LONG_POLLING_DELAY-constant" class="">LONG_POLLING_DELAY =
          <div class="docstring">
  <div class="discussion">
    
<p>Delay between receiving a message and closing the connection.</p>

<p>Closing the connection is necessary when using long polling, because the
client is not able to read the data before the connection is closed. But
instead of closing immediately, we delay a bit closing the connection to
give a chance for several messages to be sent in a row.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="HEARTBEAT_PERIOD-constant" class="">HEARTBEAT_PERIOD =
          <div class="docstring">
  <div class="discussion">
    
<p>The period between heartbeats in seconds.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>15</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Server) <strong>initialize</strong>(redisse) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_close-instance_method" title="#on_close (instance method)">- (Object) <strong>on_close</strong>(env) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options_parser-instance_method" title="#options_parser (instance method)">- (Object) <strong>options_parser</strong>(opts, options) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#response-instance_method" title="#response (instance method)">- (Object) <strong>response</strong>(env) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Server/Redis.html" title="Redisse::Server::Redis (module)">Redis</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Server/Redis.html#ensure_pubsub-instance_method" title="Redisse::Server::Redis#ensure_pubsub (method)">#ensure_pubsub</a></span>, <span class='object_link'><a href="Server/Redis.html#on_redis_close-instance_method" title="Redisse::Server::Redis#on_redis_close (method)">#on_redis_close</a></span>, <span class='object_link'><a href="Server/Redis.html#pubsub-instance_method" title="Redisse::Server::Redis#pubsub (method)">#pubsub</a></span>, <span class='object_link'><a href="Server/Redis.html#pubsub_subcribe-instance_method" title="Redisse::Server::Redis#pubsub_subcribe (method)">#pubsub_subcribe</a></span>, <span class='object_link'><a href="Server/Redis.html#pubsub_unsubscribe_proc-instance_method" title="Redisse::Server::Redis#pubsub_unsubscribe_proc (method)">#pubsub_unsubscribe_proc</a></span>, <span class='object_link'><a href="Server/Redis.html#redis-instance_method" title="Redisse::Server::Redis#redis (method)">#redis</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Server/Responses.html" title="Redisse::Server::Responses (module)">Responses</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Server/Responses.html#not_acceptable-instance_method" title="Redisse::Server::Responses#not_acceptable (method)">#not_acceptable</a></span>, <span class='object_link'><a href="Server/Responses.html#not_found-instance_method" title="Redisse::Server::Responses#not_found (method)">#not_found</a></span>, <span class='object_link'><a href="Server/Responses.html#plain_response-instance_method" title="Redisse::Server::Responses#plain_response (method)">#plain_response</a></span>, <span class='object_link'><a href="Server/Responses.html#service_unavailable-instance_method" title="Redisse::Server::Responses#service_unavailable (method)">#service_unavailable</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Redisse::Server (class)">Server</a></span></tt>) <strong>initialize</strong>(redisse) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns a new instance of Server</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/redisse/server.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_redisse'>redisse</span><span class='rparen'>)</span>
  <span class='ivar'>@redisse</span> <span class='op'>=</span> <span class='id identifier rubyid_redisse'>redisse</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="on_close-instance_method">
  
    - (<tt>Object</tt>) <strong>on_close</strong>(env) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/redisse/server.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_close'>on_close</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='lbracket'>[</span><span class='symbol'>:stats</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:connected</span><span class='rbracket'>]</span> <span class='op'>-=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='lbracket'>[</span><span class='symbol'>:stats</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:served</span><span class='rbracket'>]</span>    <span class='op'>+=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_unsubscribe'>unsubscribe</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stop_heartbeat'>stop_heartbeat</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="options_parser-instance_method">
  
    - (<tt>Object</tt>) <strong>options_parser</strong>(opts, options) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/redisse/server.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_options_parser'>options_parser</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_default_port'>default_port</span> <span class='op'>=</span> <span class='id identifier rubyid_redisse'>redisse</span><span class='period'>.</span><span class='id identifier rubyid_default_port'>default_port</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_default_port'>default_port</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_default_port'>default_port</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="response-instance_method">
  
    - (<tt>Object</tt>) <strong>response</strong>(env) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/redisse/server.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_response'>response</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_not_acceptable'>not_acceptable</span> <span class='kw'>unless</span> <span class='id identifier rubyid_acceptable?'>acceptable?</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_channels'>channels</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_redisse'>redisse</span><span class='period'>.</span><span class='id identifier rubyid_channels'>channels</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_not_found'>not_found</span> <span class='kw'>if</span> <span class='id identifier rubyid_channels'>channels</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_channels'>channels</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='kw'>return</span> <span class='id identifier rubyid_service_unavailable'>service_unavailable</span>
  <span class='id identifier rubyid_send_history_events'>send_history_events</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_channels'>channels</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_heartbeat'>heartbeat</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_streaming_response'>streaming_response</span><span class='lparen'>(</span><span class='int'>200</span><span class='comma'>,</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text/event-stream</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cache-Control</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no-cache</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-Accel-Buffering</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Jun 16 16:15:04 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.1.2).
</div>

  </body>
</html>